{% extends "base.html" %}

{% block title %}{{ translations.page.title }} - {{ translations.subject.name }}{% endblock %}
{% block description %}{{ translations.page.description }}{% endblock %}

{% block og_title %}Podcasts de Probabilidade e Estatística - Aprendizagem Auditiva{% endblock %}
{% block og_description %}Coleção de podcasts educativos sobre probabilidade e estatística para aprendizagem flexível e
acessível{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/general/homepage.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/subjects/probabilidade/podcasts.css') }}">
{% endblock %}

{% block container_class %}subject-container{% endblock %}

{% block nav_links %}
<ul class="nav-links">
    {% for feature in subjects[subject_id].features %}
    <li>
        <a href="{{ url_for('subject_feature', subject=subject_id, feature=feature.id) }}" {% if feature_id==feature.id
            %}class="active" aria-current="page" {% endif %}>
            <i class="fas {{ feature.icon }}"></i>
            {{ translations.subject.pages[feature.id].title }}
        </a>
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block hero %}
<section class="subject-hero">
    <div class="container">
        <h1><i class="fas {{ translations.page.icon }}"></i> {{ translations.page.title }}</h1>
        <p>{{ translations.page.description }}</p>
    </div>
</section>
{% endblock %}

{% block content %}
<div class="podcast-container">
    <div class="podcast-grid">
        {% for episode_id, episode in translations.page.episodes.items() %}
        <!-- Episode {{ episode_id }} -->
        <div class="podcast-card" data-episode="{{ episode_id }}">
            <div class="podcast-cover" style="--color: {{ episode.color }}">
                <div class="episode-number">{{ '%02d' % episode_id|int }}</div>
                <div class="cover-content">
                    <h3>{{ episode.title }}</h3>
                    <div class="episode-duration">
                        <i class="far fa-clock"></i>
                        <span class="duration-text">--:--</span>
                    </div>
                </div>
                <div class="podcast-overlay"></div>
            </div>
            <div class="podcast-info">
                <p class="podcast-description">{{ episode.description }}</p>
                <div class="podcast-player" data-src="{{ url_for('static', filename='assets/' + episode.audio) }}"
                    data-title="{{ episode.title }}">
                    <div class="player-controls">
                        <button class="play-button" aria-label="{{ translations.general.aria.play }}">
                            <i class="fas fa-play"></i>
                        </button>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-indicator"></div>
                                <div class="progress-thumb"></div>
                            </div>
                        </div>
                        <div class="time-display">0:00</div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Minimized Player (hidden by default) -->
    <div class="minimized-player" style="display: none;">
        <div class="mini-cover">
            <div class="mini-episode-number">01</div>
        </div>
        <div class="mini-player-info">
            <div class="mini-title">{{ translations.general.no_episode_selected }}</div>
            <div class="mini-artist">{{ translations.general.educational_podcasts }}</div>
        </div>
        <div class="mini-controls">
            <button class="mini-skip-button mini-skip-back" aria-label="{{ translations.general.aria.skip_back }}">
                <i class="fas fa-backward"></i>
            </button>
            <button class="mini-play-button" aria-label="{{ translations.general.aria.play }}">
                <i class="fas fa-play"></i>
            </button>
            <button class="mini-skip-button mini-skip-forward"
                aria-label="{{ translations.general.aria.skip_forward }}">
                <i class="fas fa-forward"></i>
            </button>
            <div class="mini-progress-container">
                <div class="mini-progress-bar">
                    <div class="mini-progress-indicator"></div>
                </div>
            </div>
            <div class="mini-volume-container">
                <button class="mini-volume-button" aria-label="{{ translations.general.aria.volume }}">
                    <i class="fas fa-volume-up"></i>
                </button>
                <div class="volume-slider-container">
                    <div class="volume-slider">
                        <div class="volume-slider-fill"></div>
                        <div class="volume-slider-thumb"></div>
                    </div>
                    <div class="volume-percentage">100%</div>
                </div>
            </div>
            <div class="mini-time-display">0:00</div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Howler.js for better audio handling -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
<script src="{{ url_for('static', filename='js/subjects/probabilidade/podcasts.js') }}"></script>
{% endblock %}
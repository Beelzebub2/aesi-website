{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}
{% block description %}Teste os seus conhecimentos em probabilidade e estatística{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/general/homepage.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/subjects/probabilidade/descobrir.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/subjects/probabilidade/quiz.js') }}" defer></script>
{% endblock %}

{% block container_class %}subject-container{% endblock %}

{% block nav_links %}
<ul class="nav-links">
    <li><a href="{{ url_for('subject_home', subject=subject_id) }}"><i class="fas fa-home"></i> Início</a></li>
    {% for feature in subjects[subject_id].features %}
    <li>
        <a href="{{ url_for('subject_feature', subject=subject_id, feature=feature.id) }}" {% if feature_id==feature.id
            %}class="active" aria-current="page" {% endif %}>
            {% if feature.icon == 'fa-calculator' %}
            <i class="fas fa-calculator"></i>
            {% elif feature.icon == 'fa-brain' or feature.icon == 'fa-question-circle' %}
            <i class="fas fa-brain"></i>
            {% elif feature.icon == 'fa-magnifying-glass-chart' %}
            <i class="fas fa-magnifying-glass-chart"></i>
            {% elif feature.icon == 'fa-chart-line' %}
            <i class="fas fa-chart-line"></i>
            {% endif %}
            {{ translations.subject.pages[feature.name].title }}
        </a>
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block hero %}
<section class="subject-hero">
    <div class="container">
        <h1><i class="fas fa-brain"></i> {{ translations.page.title }}</h1>
        <p>{{ translations.page.description }}</p>
    </div>
</section>
{% endblock %}

{% block content %}
<div class="quiz-container" data-quiz-type="quiz">
    <div class="quiz-content">
        <div id="quiz-start" class="quiz-section active">
            <i class="fas fa-brain fa-3x"></i>
            <h2>{{ translations.page.start.title }}</h2>
            <p>{{ translations.page.start.description }}</p>
            <button id="start-quiz" class="btn btn-primary">
                <i class="fas fa-play"></i>
                {{ translations.page.start.button }}
            </button>
        </div>

        <div id="quiz-questions" class="quiz-section">
            <div class="quiz-header">
                <div class="progress-container">
                    <div class="progress-text">Questão <span id="current-question">0</span> de <span
                            id="total-questions">0</span></div>
                    <div class="progress-bar">
                        <div class="progress" id="quiz-progress"></div>
                    </div>
                </div>
                <div class="quiz-score">Pontuação: <span id="score">0</span></div>
            </div>
            <div class="question-container">
                <p id="question-text"></p>
                <div id="options-container" class="options-container"></div>
            </div>
            <div id="feedback" class="feedback" style="display: none;"></div>
            <div class="quiz-controls" style="display: none;">
                <button class="next-btn next-question">
                    <i class="fas fa-arrow-right"></i>
                    {{ translations.page.buttons.next }}
                </button>
            </div>
        </div>
        <div id="quiz-results" class="quiz-section">
            <i class="fas fa-chart-pie fa-3x"></i>
            <h2>{{ translations.page.results.title }}</h2>
            <div class="results-content">
                <div class="score-display">
                    <p>{{ translations.page.results.score }}: <span id="final-score">0</span>%</p>
                </div>
                <div class="results-message"></div>
            </div>
            <button id="restart-quiz" class="btn btn-primary">
                <i class="fas fa-redo"></i>
                {{ translations.page.buttons.restart }}
            </button>
        </div>
    </div>
</div>
{% endblock %}
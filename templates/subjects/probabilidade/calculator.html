{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}
{% block description %}{{ translations.page.description }}{% endblock %}

{% block og_title %}{{ translations.page.title }} - {{ translations.subject.name }}{% endblock %}
{% block og_description %}{{ translations.page.description }}{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/general/homepage.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/general/form-elements.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/subjects/probabilidade/calculator.css') }}">
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/subjects/probabilidade/calculator.js') }}" defer></script>
<script src="{{ url_for('static', filename='js/subjects/probabilidade/chart.js') }}" defer></script>
{% endblock %}

{% block container_class %}subject-container{% endblock %}

{% block nav_links %}
<ul class="nav-links">
    <li><a href="{{ url_for('subject_home', subject=subject_id) }}" {% if not feature_id %}class="active"
            aria-current="page" {% endif %}><i class="fas fa-home"></i> {{ translations.general.home }}</a></li>
    {% for feature in subjects[subject_id].features %}
    <li>
        <a href="{{ url_for('subject_feature', subject=subject_id, feature=feature.id) }}" {% if feature_id==feature.id
            %} class="active" aria-current="page" {% endif %}>
            <i class="fas {{ feature.icon }}"></i>
            {{ translations.subject.pages[feature.id].title }}
        </a>
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block hero %}
<section class="subject-hero">
    <div class="container">
        <h1><i class="fas {{ translations.page.icon }}"></i> {{ translations.page.title }}</h1>
        <p>{{ translations.page.description }}</p>
    </div>
</section>
{% endblock %}

{% block content %}
<div class="calculator-container">
    <div class="calculator-grid">
        <div class="calculator-card">
            <div class="distribution-select">
                <label for="distribution">{{ translations.page.select_distribution }}</label>
                <select id="distribution" class="form-select">
                    <option value="binomial">{{ translations.page.distributions.binomial.name }}</option>
                    <option value="poisson">{{ translations.page.distributions.poisson.name }}</option>
                    <option value="normal">{{ translations.page.distributions.normal.name }}</option>
                </select>
            </div>

            <div id="binomial-params" class="param-group">
                <div class="param-input">
                    <label for="n">{{ translations.page.distributions.binomial.params.n }}:</label>
                    <input type="number" id="n" min="1" value="10" class="form-input">
                </div>
                <div class="param-input">
                    <label for="p">{{ translations.page.distributions.binomial.params.p }}:</label>
                    <input type="number" id="p" min="0" max="1" step="0.01" value="0.5" class="form-input">
                </div>
                <div class="param-input">
                    <label for="k">{{ translations.page.distributions.binomial.params.k }}:</label>
                    <input type="number" id="k" min="0" value="5" class="form-input">
                </div>
            </div>

            <div id="poisson-params" class="param-group hidden">
                <div class="param-input">
                    <label for="lambda">{{ translations.page.distributions.poisson.params.lambda }}:</label>
                    <input type="number" id="lambda" min="0" step="0.1" value="2" class="form-input">
                </div>
                <div class="param-input">
                    <label for="k-poisson">{{ translations.page.distributions.poisson.params.k }}:</label>
                    <input type="number" id="k-poisson" min="0" value="2" class="form-input">
                </div>
            </div>

            <div id="normal-params" class="param-group hidden">
                <div class="param-input">
                    <label for="mean">{{ translations.page.distributions.normal.params.mean }}:</label>
                    <input type="number" id="mean" step="0.1" value="0" class="form-input">
                </div>
                <div class="param-input">
                    <label for="std">{{ translations.page.distributions.normal.params.std }}:</label>
                    <input type="number" id="std" min="0.1" step="0.1" value="1" class="form-input">
                </div>
                <div class="param-input">
                    <label for="x">{{ translations.page.distributions.normal.params.x }}:</label>
                    <input type="number" id="x" step="0.1" value="0" class="form-input">
                </div>
                <div class="param-input">
                    <label for="probability-type">{{ translations.page.distributions.normal.params.probability_type
                        }}:</label>
                    <select id="probability-type" class="form-select">
                        <option value="less">P(X ≤ x)</option>
                        <option value="greater">P(X > x)</option>
                        <option value="between">P(a ≤ X ≤ b)</option>
                    </select>
                </div>
                <div id="between-input" class="param-input hidden">
                    <label for="x2">{{ translations.page.upper_limit }}</label>
                    <input type="number" id="x2" step="0.1" value="1" class="form-input">
                </div>
            </div>

            <div id="result" class="result-container">
                <h3>{{ translations.page.result }}</h3>
                <p class="result-value">-</p>
                <p class="result-explanation">-</p>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="distributionChart"></canvas>
        </div>
    </div>
</div>
{% endblock %}

{% block bottom_js %}
<script src="{{ url_for('static', filename='js/general/theme.js') }}"></script>
{% endblock %}
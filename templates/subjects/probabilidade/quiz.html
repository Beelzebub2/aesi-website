<!DOCTYPE html>
<html lang="pt-PT">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Faça questionários interativos sobre matemática, ciências e história">
    <title>Questionários de Aprendizagem</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/general/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/general/navbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/general/homepage.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/subjects/probabilidade/quiz.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/general/theme-toggle.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/general/background.css') }}">
    <script src="{{ url_for('static', filename='js/general/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/general/background.js') }}" defer></script>
    <script>
        // Initialize theme from localStorage
        document.addEventListener('DOMContentLoaded', function () {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('i');

            // Update icon based on current theme
            if (savedTheme === 'dark') {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }

            // Theme toggle functionality
            themeToggle.addEventListener('click', function () {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';

                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);

                // Update icon
                if (newTheme === 'dark') {
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
            });
        });
    </script>
</head>

<body>
    <div class="home-background"></div>

    <div class="subject-container">
        <nav class="navbar" aria-label="Navegação principal">
            <div class="container navbar-content"> <a href="{{ url_for('home') }}" class="logo">Plataforma de
                    Aprendizagem</a>
                <ul class="nav-links">
                    <li><a href="{{ url_for('probabilidade') }}">Início</a></li>
                    <li><a href="{{ url_for('calculator') }}">Calculadora</a></li>
                    <li><a href="{{ url_for('quiz') }}" class="active" aria-current="page">Questionários</a></li>
                    <li><a href="{{ url_for('game') }}">Jogos</a></li>
                </ul>
                <div class="theme-toggle">
                    <button id="themeToggle" aria-label="Alternar entre modo claro e escuro">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </nav>
        <section class="subject-hero"></section>
        <main class="container">
            <div class="quiz-container">
                <div id="quizArea">
                    <div id="quizHeader" class="quiz-header" style="display: none;">
                        <h1 id="quizTitle" class="section-title quiz-title">{{ translations.page.title }}</h1>
                        <div class="quiz-progress"> <span class="progress-text">{{
                                translations.page.current_question.replace('{current}', '<span
                                    id="currentQuestion">0</span>').replace('{total}', '<span
                                    id="totalQuestions">0</span>') | safe }}</span>
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <span class="score-text">{{ translations.page.score.replace('{score}', '<span
                                    id="score">0</span>') | safe }}</span>
                        </div>
                    </div>

                    <div id="questionContainer" class="question-container" style="display: none;">
                        <p id="questionText" class="question-text"></p>
                        <div id="optionsContainer" class="options-container">
                            <div id="quizOptions" class="quiz-options"></div>
                        </div>
                    </div>

                    <div id="feedback" class="feedback" style="display: none;"></div>
                    <div id="quizControls" class="quiz-controls" style="display: none;">
                        <button id="nextBtn" class="next-btn">{{ translations.general.next }}</button>
                    </div>
                    <div id="quizSummary" class="quiz-summary" style="display: none;">
                        <h2>{{ translations.page.complete }}</h2>
                        <p class="final-score">{{ translations.page.score.replace('{score}', '<span
                                id="finalScore">0</span>') | safe }}</p>
                        <button id="restartBtn" class="restart-btn">{{ translations.general.try_again }}</button>
                    </div>
                </div>
            </div>
        </main>
        <footer class="footer">
            <div class="container">
                <p>&copy; 2025 {{ translations.general.platform_name }}. {{ translations.general.copyright }}</p>
            </div>
        </footer>
    </div><!-- Close subject-container -->

    <script src="{{ url_for('static', filename='js/subjects/probabilidade/quiz.js') }}" defer></script>
</body>

</html>
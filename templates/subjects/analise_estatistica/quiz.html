{% extends "base.html" %}

{% block title %}{{ translations.subject.pages.quiz.title }} - {{ translations.subject.name }}{% endblock %}
{% block description %}{{ translations.subject.pages.quiz.description }}{% endblock %}

{% block og_title %}{{ translations.subject.pages.quiz.title }} - AESI Learning Platform{% endblock %}
{% block og_description %}{{ translations.subject.pages.quiz.description }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/general/homepage.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/subjects/probabilidade/quiz.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/subjects/analise_estatistica/quiz-main.js') }}" defer></script>
{% endblock %}

{% block container_class %}subject-container{% endblock %}

{% block nav_links %}
<ul class="nav-links">
    <li><a href="{{ url_for('subject_home', subject=subject_id) }}"><i class="fas fa-home"></i> {{
            translations.general.home }}</a></li>
    {% for feature in subjects[subject_id].features %}
    <li>
        <a href="{{ url_for('subject_feature', subject=subject_id, feature=feature.id) }}" {% if feature_id==feature.id
            %}class="active" aria-current="page" {% endif %}>
            <i class="fas {{ feature.icon }}"></i>
            {{ translations.subject.pages[feature.id].title }}
        </a>
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block hero %}
<section class="subject-hero">
    <div class="container">
        <h1><i class="fas {{ translations.subject.icon }}"></i> {{ translations.subject.pages.quiz.title }}</h1>
        <p>{{ translations.subject.pages.quiz.description }}</p>
    </div>
</section>
{% endblock %}

{% block content %}
<div class="quiz-container" data-quiz-type="quiz">
    <div class="quiz-content">
        <div id="quiz-start" class="quiz-section active">
            <i class="fas {{ translations.subject.icon }} fa-3x"></i>
            <h2>{{ translations.subject.pages.quiz.start.title }}</h2>
            <p>{{ translations.subject.pages.quiz.start.description }}</p>
            <button id="start-quiz" class="btn btn-primary">
                <i class="fas fa-play"></i>
                {{ translations.subject.pages.quiz.start.button }}
            </button>
        </div>

        <div id="quiz-questions" class="quiz-section">
            <div class="quiz-header">
                <div class="progress-container">
                    <div class="progress-text">{{ translations.general.current_question }} <span
                            id="current-question">0</span> {{ translations.general.of }} <span
                            id="total-questions">0</span></div>
                    <div class="progress-bar">
                        <div class="progress" id="quiz-progress"></div>
                    </div>
                </div>
                <div class="quiz-score">Pontuação: <span id="score">0</span></div>
            </div>
            <div class="question-container">
                <p id="question-text"></p>
                <div id="options-container" class="options-container"></div>
            </div>
            <div id="feedback" class="feedback" style="display: none;"></div>
            <div class="quiz-controls" style="display: none;">
                <button class="next-btn next-question">
                    <i class="fas fa-arrow-right"></i>
                    {{ translations.subject.pages.quiz.buttons.next }}
                </button>
            </div>
        </div>
        <div id="quiz-results" class="quiz-section">
            <i class="fas fa-chart-pie fa-3x"></i>
            <h2>{{ translations.subject.pages.quiz.results.title }}</h2>
            <div class="results-content">
                <div class="score-display">
                    <p>{{ translations.subject.pages.quiz.results.score }}: <span id="final-score">0</span>%</p>
                </div>
                <div class="results-message"></div>
            </div>
            <button id="restart-quiz" class="btn btn-primary">
                <i class="fas fa-redo"></i>
                {{ translations.subject.pages.quiz.buttons.restart }}
            </button>
        </div>
    </div>
</div>
{% endblock %}